<!DOCTYPE html>
<html>

  <head>
    <title>Each</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="Sebastian Sastre" />
    <script type='text/javascript' src='bower_components/amber/support/requirejs/require.min.js'></script>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/css/style.css">
  </head>

  <body>

    <div id="content"></div>
    <ul id="listView">
      <li rv-iterable-content="models"> { content } </li>
    </ul>


    <script type='text/javascript'>
      require.config({ paths: {
          'app': 'src', //mapping compiled .js files and smalltalk source files
          'bower': 'bower_components'
      }});
      require([
          //'bower/rivets/dist/rivets.min',
          'bower/jquery/jquery',
          'bower/rivets/dist/rivets'
      ], function (object) {
          var rivets = require('bower/rivets/dist/rivets');
          var models = [
            {content: '1776'}
            ,{content: '42'}
            ,{content: '11'}
            ,{content: '1'}
            ];
          
          rivets.binders['iterable-*'] = rivets.binders['each-*'];

           rivets.binders['each-*'] = {
             "function": true,
             routine: function(el, value) {
                console.info(el,value);
               rivets.binders['iterable-*'].routine.call(this, el, function(e) {
                 e.preventDefault(); 
                 console.log(e);
                 console.log(value);
                 value.call(this, e); 
               });
             }
           };

           rivets.bind($('#listView'),{});

      });
    </script>


  </body>

</html>
